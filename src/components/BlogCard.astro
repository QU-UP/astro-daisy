---
import FormattedDate from './FormattedDate.astro';

interface Props {
    title:string;
    content:string;
    href:string;
    image: string;
    date:Date;
}
const base = import.meta.env.BASE_URL|| '/';

// Helper function to prepend base without double slashes
function withBase(path: string) {
  if (!path) return path;
  return `${base.replace(/\/$/, '')}/${path.replace(/^\//, '')}`;
}

const {title, content, href, date,image="/img/blog/kieran-wood-unsplash.jpg"} = Astro.props


const fullHref = withBase(href);
const fullImage = withBase(image);
---

<div class="card bg-base-100 card-border card-bordered shadow-sm card-md prose-img:rounded-xl
  basis-full          
  md:basis-1/2        
  lg:basis-1/3        
  xl:basis-1/5 
  shrink
  prose-headings:text-base-content prose-a:text-primary 
  prose-hr:border-base-300
  ">
  <a href={fullHref}>
    <figure>
      <img
        src={fullImage}
        alt="Shoes" />
    </figure>
    <div class="card-body">
      <h2 class="card-title">{title}</h2>
      <p class="date">
						<FormattedDate date={date} />
        </p>
      <p>{content}</p>
    </div>
  </a>
</div>